<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
    <title>Document</title>
</head>

<body style="padding: 150px">
    <div class="input-group">
        <input type="text" id="input1" class="form-control" placeholder="url" aria-describedby="basic-addon2">
        <span class="input-group-addon" id="btn">parse</span>
    </div>
    <script>
        function GetRandomNum(Min, Max) {
            var Range = Max - Min;
            var Rand = Math.random();
            return (Min + Math.round(Rand * Range));
        }
        $(function () {
            $("#btn").click(function () {
                var inputVal = $("#input1").val().trim();
                if (inputVal == "") {
                    alert("填写URL");
                    return;
                }
                alert(inputVal);
                // 通过jsonp跨域
                $.ajax({
                    url: 'https://wx.yijianqushuiyin.com/api/analyze/parse?appname=xcx-shuiyin&appversion=1.0&sign=657352d1252e2f416cf7cccff39f3a75&systype=xcx' +
                        '&token=' + GetRandomNum(1, 10000) + '&uid=' + GetRandomNum(1, 1000) +
                        '&url=' + inputVal,
                    type: "GET",
                    dataType: "jsonp", //指定服务器返回的数据类型
                    jsonp: 'theFunction', //用以获得jsonp回调函数名的参数名(默认为:callback)
                    jsonpCallback: "showData", //指定回调函数名称 
                    success: function (data) {
                        console.log("调用success");
                    }
                });


            })

        });
    </script>
</body>

</html>